<!DOCTYPE HTML>
<html lang="en" class="light" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Fragments - Reassembly Modding by Example</title>


        <!-- Custom HTML head -->
        
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->

        <!-- MathJax -->
        <script async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    </head>
    <body class="sidebar-visible no-js">
    <div id="body-container">
        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('light')
            html.classList.add(theme);
            var body = document.querySelector('body');
            body.classList.remove('no-js')
            body.classList.add('js');
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var body = document.querySelector('body');
            var sidebar = null;
            var sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            sidebar_toggle.checked = sidebar === 'visible';
            body.classList.remove('sidebar-visible');
            body.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded affix "><a href="introduction.html">Introduction</a></li><li class="chapter-item expanded "><a href="mod_structure.html"><strong aria-hidden="true">1.</strong> Mod structure</a></li><li class="chapter-item expanded "><a href="publishing_to_the_steam_workshop.html"><strong aria-hidden="true">2.</strong> Publishing to the Steam Workshop</a></li><li class="chapter-item expanded affix "><li class="part-title">Sandbox</li><li class="chapter-item expanded "><a href="sandbox_basics.html"><strong aria-hidden="true">3.</strong> Sandbox Basics</a></li><li class="chapter-item expanded "><a href="further_ship_testing.html"><strong aria-hidden="true">4.</strong> Further Ship Testing</a></li><li class="chapter-item expanded affix "><li class="part-title">Blocks</li><li class="chapter-item expanded "><a href="blocks.lua.html"><strong aria-hidden="true">5.</strong> blocks.lua</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="basic_fields_and_hull.html"><strong aria-hidden="true">5.1.</strong> Basic Fields and Hull</a></li><li class="chapter-item expanded "><a href="block_features.html"><strong aria-hidden="true">5.2.</strong> Block Features</a></li><li class="chapter-item expanded "><a href="block_extensions.html"><strong aria-hidden="true">5.3.</strong> Block Extensions</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="getting_the_most_out_of_block_extensions.html"><strong aria-hidden="true">5.3.1.</strong> Getting the most out of block extensions</a></li></ol></li><li class="chapter-item expanded "><a href="getting_blocks_to_show_up_in_the_campaigns_databank.html"><strong aria-hidden="true">5.4.</strong> Getting Blocks to Show Up in the Campaign's Databank</a></li><li class="chapter-item expanded "><a href="commands.html"><strong aria-hidden="true">5.5.</strong> Commands</a></li><li class="chapter-item expanded "><a href="resource_containers.html"><strong aria-hidden="true">5.6.</strong> Resource Containers</a></li><li class="chapter-item expanded "><a href="resource_collectors.html"><strong aria-hidden="true">5.7.</strong> Resource Collectors</a></li><li class="chapter-item expanded "><a href="resource_producers.html"><strong aria-hidden="true">5.8.</strong> Resource Producers</a></li><li class="chapter-item expanded "><a href="generators.html"><strong aria-hidden="true">5.9.</strong> Generators</a></li><li class="chapter-item expanded "><a href="thrusters.html"><strong aria-hidden="true">5.10.</strong> Thrusters</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="rotator_thrusters.html"><strong aria-hidden="true">5.10.1.</strong> Rotator Thrusters</a></li></ol></li><li class="chapter-item expanded "><a href="torquers.html"><strong aria-hidden="true">5.11.</strong> Torquers</a></li><li class="chapter-item expanded "><a href="factories.html"><strong aria-hidden="true">5.12.</strong> Factories</a></li><li class="chapter-item expanded "><a href="shields.html"><strong aria-hidden="true">5.13.</strong> Shields</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="void_shields.html"><strong aria-hidden="true">5.13.1.</strong> Void Shields</a></li><li class="chapter-item expanded "><a href="power_armor.html"><strong aria-hidden="true">5.13.2.</strong> Power Armor</a></li></ol></li><li class="chapter-item expanded "><a href="teleporters.html"><strong aria-hidden="true">5.14.</strong> Teleporters</a></li><li class="chapter-item expanded "><a href="melee_blocks.html"><strong aria-hidden="true">5.15.</strong> Melee blocks</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="other_collision_bumper_and_elasticity.html"><strong aria-hidden="true">5.15.1.</strong> Other Collision: Bumper and Elasticity</a></li></ol></li><li class="chapter-item expanded "><a href="explosive_blocks.html"><strong aria-hidden="true">5.16.</strong> Explosive Blocks</a></li><li class="chapter-item expanded "><a href="invulnerable_blocks.html"><strong aria-hidden="true">5.17.</strong> Invulnerable Blocks</a></li><li class="chapter-item expanded "><a href="blocks_with_lifetimes.html"><strong aria-hidden="true">5.18.</strong> Blocks with Lifetimes</a></li><li class="chapter-item expanded "><a href="noclipping_blocks.html"><strong aria-hidden="true">5.19.</strong> Noclipping Blocks</a></li><li class="chapter-item expanded "><a href="environmental_blocks.html"><strong aria-hidden="true">5.20.</strong> Environmental Blocks</a></li><li class="chapter-item expanded "><a href="seeds.html"><strong aria-hidden="true">5.21.</strong> Seeds</a></li><li class="chapter-item expanded "><a href="roots.html"><strong aria-hidden="true">5.22.</strong> Roots</a></li><li class="chapter-item expanded "><a href="cosmetic_fields.html"><strong aria-hidden="true">5.23.</strong> Cosmetic Features</a></li><li class="chapter-item expanded "><a href="shrouding.html"><strong aria-hidden="true">5.24.</strong> Shrouding</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="transparency_in_shrouds.html"><strong aria-hidden="true">5.24.1.</strong> Transparency in Shrouds</a></li><li class="chapter-item expanded "><a href="getting_more_than_three_colors.html"><strong aria-hidden="true">5.24.2.</strong> Getting More Than Three Colors</a></li><li class="chapter-item expanded "><a href="centering_shrouds_on_non-turreted_blocks.html"><strong aria-hidden="true">5.24.3.</strong> Centering Shrouds on Non-Turreted Blocks</a></li></ol></li><li class="chapter-item expanded "><a href="cannons.html"><strong aria-hidden="true">5.25.</strong> Cannons</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="fragments.html" class="active"><strong aria-hidden="true">5.25.1.</strong> Fragments</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="bullet_poofs.html"><strong aria-hidden="true">5.25.1.1.</strong> Bullet Poofs</a></li><li class="chapter-item expanded "><a href="anti-bullet_poof_stages.html"><strong aria-hidden="true">5.25.1.2.</strong> Anti-Bullet Poof Stages</a></li><li class="chapter-item expanded "><a href="muzzle_flash.html"><strong aria-hidden="true">5.25.1.3.</strong> Muzzle Flash</a></li><li class="chapter-item expanded "><a href="bullet_shaping.html"><strong aria-hidden="true">5.25.1.4.</strong> Bullet Shaping</a></li><li class="chapter-item expanded "><a href="fragbeams.html"><strong aria-hidden="true">5.25.1.5.</strong> Fragbeams</a></li><li class="chapter-item expanded "><a href="barrage_frag.html"><strong aria-hidden="true">5.25.1.6.</strong> Barrage Frag</a></li><li class="chapter-item expanded "><a href="flamethrowers.html"><strong aria-hidden="true">5.25.1.7.</strong> Flamethrowers</a></li><li class="chapter-item expanded "><a href="phase_frags.html"><strong aria-hidden="true">5.25.1.8.</strong> Phase Frags</a></li></ol></li><li class="chapter-item expanded "><a href="cannon_boosts.html"><strong aria-hidden="true">5.25.2.</strong> Cannon Boosts</a></li></ol></li><li class="chapter-item expanded "><a href="lasers.html"><strong aria-hidden="true">5.26.</strong> Lasers</a></li><li class="chapter-item expanded "><a href="launchers.html"><strong aria-hidden="true">5.27.</strong> Launchers</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="blueprint_drones.html"><strong aria-hidden="true">5.27.1.</strong> Blueprint Drones</a></li><li class="chapter-item expanded "><a href="launcher_chaining.html"><strong aria-hidden="true">5.27.2.</strong> Launcher Chaining</a></li></ol></li><li class="chapter-item expanded "><a href="turreted_weapons.html"><strong aria-hidden="true">5.28.</strong> Turreted Weapons</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="x-spaced_barrel_beams.html"><strong aria-hidden="true">5.28.1.</strong> X-Spaced Barrel Beams</a></li><li class="chapter-item expanded "><a href="y-spaced_barrel_barrage.html"><strong aria-hidden="true">5.28.2.</strong> Y-Spaced Barrel Barrage</a></li><li class="chapter-item expanded "><a href="cosmetic_launchable_laser_printer.html"><strong aria-hidden="true">5.28.3.</strong> Cosmetic Launchable Laser Printer</a></li></ol></li><li class="chapter-item expanded "><a href="always_and_never_firing_weapons.html"><strong aria-hidden="true">5.29.</strong> Always and Never Firing Weapons</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="always_fire_weapons_as_decorations.html"><strong aria-hidden="true">5.29.1.</strong> Always Fire Weapons as Decorations</a></li></ol></li><li class="chapter-item expanded "><a href="one-use_weapons.html"><strong aria-hidden="true">5.30.</strong> One-Use Weapons</a></li><li class="chapter-item expanded "><a href="combining_weapon_types.html"><strong aria-hidden="true">5.31.</strong> Combining Weapon Types</a></li><li class="chapter-item expanded "><a href="other_features_and_fields.html"><strong aria-hidden="true">5.32.</strong> Other Features and Fields</a></li><li class="chapter-item expanded "><a href="features_and_fields_not_to_use.html"><strong aria-hidden="true">5.33.</strong> Features and Fields Not To Use</a></li></ol></li><li class="chapter-item expanded "><li class="part-title">Shapes</li><li class="chapter-item expanded "><a href="vanilla_shapes.html"><strong aria-hidden="true">6.</strong> Vanilla Shapes</a></li><li class="chapter-item expanded "><a href="shapes.lua.html"><strong aria-hidden="true">7.</strong> shapes.lua</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="mirrored_shapes.html"><strong aria-hidden="true">7.1.</strong> Mirrored Shapes</a></li><li class="chapter-item expanded "><a href="calculating_port_positions.html"><strong aria-hidden="true">7.2.</strong> Calculating Port Positions</a></li><li class="chapter-item expanded "><a href="port_flags.html"><strong aria-hidden="true">7.3.</strong> Port Flags</a></li><li class="chapter-item expanded "><a href="root_shapes.html"><strong aria-hidden="true">7.4.</strong> Root Shapes</a></li><li class="chapter-item expanded "><a href="niche_port_flag_combinations.html"><strong aria-hidden="true">7.5.</strong> Niche Port Flag Combinations</a></li></ol></li><li class="chapter-item expanded "><li class="part-title">Audio</li><li class="chapter-item expanded "><a href="audio.lua.html"><strong aria-hidden="true">8.</strong> audio.lua</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="mixing_a_stereo_file_down_to_mono.html"><strong aria-hidden="true">8.1.</strong> Mixing a Stereo File Down to Mono</a></li></ol></li><li class="chapter-item expanded "><li class="part-title">Factions</li><li class="chapter-item expanded "><a href="factions.lua.html"><strong aria-hidden="true">9.</strong> factions.lua</a></li><li class="chapter-item expanded affix "><li class="part-title">Regions</li><li class="chapter-item expanded "><a href="regions.lua.html"><strong aria-hidden="true">10.</strong> regions.lua</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="fleet_spawning.html"><strong aria-hidden="true">10.1.</strong> Fleet Spawning</a></li><li class="chapter-item expanded "><a href="unique_fleet_spawning.html"><strong aria-hidden="true">10.2.</strong> Unique Fleet Spawning</a></li><li class="chapter-item expanded "><a href="subregions.html"><strong aria-hidden="true">10.3.</strong> Subregions</a></li><li class="chapter-item expanded "><a href="multiple_regions_in_one_mod.html"><strong aria-hidden="true">10.4.</strong> Multiple Regions in One Mod</a></li><li class="chapter-item expanded "><a href="structures_on_asteroids.html"><strong aria-hidden="true">10.5.</strong> Structures on Asteroids</a></li><li class="chapter-item expanded "><a href="nonfunctional_asteroid_flags.html"><strong aria-hidden="true">10.6.</strong> Nonfunctional Asteroid Flags</a></li></ol></li><li class="chapter-item expanded "><li class="part-title">Cvars</li><li class="chapter-item expanded "><a href="cvars.txt.html"><strong aria-hidden="true">11.</strong> cvars.txt</a></li><li class="chapter-item expanded affix "><li class="part-title">Other References</li><li class="chapter-item expanded "><a href="standard_deviation_fields.html"><strong aria-hidden="true">12.</strong> Standard Deviation Fields</a></li><li class="chapter-item expanded "><a href="ups.html"><strong aria-hidden="true">13.</strong> UPS</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <!-- Track and set sidebar scroll position -->
        <script>
            var sidebarScrollbox = document.querySelector('#sidebar .sidebar-scrollbox');
            sidebarScrollbox.addEventListener('click', function(e) {
                if (e.target.tagName === 'A') {
                    sessionStorage.setItem('sidebar-scroll', sidebarScrollbox.scrollTop);
                }
            }, { passive: true });
            var sidebarScrollTop = sessionStorage.getItem('sidebar-scroll');
            sessionStorage.removeItem('sidebar-scroll');
            if (sidebarScrollTop) {
                // preserve sidebar scroll position when navigating via links within sidebar
                sidebarScrollbox.scrollTop = sidebarScrollTop;
            } else {
                // scroll sidebar to current active section when navigating via "next/previous chapter" buttons
                var activeSection = document.querySelector('#sidebar .active');
                if (activeSection) {
                    activeSection.scrollIntoView({ block: 'center' });
                }
            }
        </script>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">Reassembly Modding by Example</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="fragments"><a class="header" href="#fragments">Fragments</a></h1>
<p>When a bullet is destroyed, it can produce fragments. These fragments can also produce fragments when they are destroyed, creating one of the most versatile systems in Reassembly modding.</p>
<p>Fragments are nested within projectile code and have the same field types as base cannons except for those which wouldn't make sense.</p>
<p>Look at the code below and look at the similarities between the base cannon bullet and the fragment which is nested within it:</p>
<pre><code class="language-lua">{ 17000
    features=CANNON
    cannon={
        damage=100
        roundsPerSec=5
        muzzleVel=1000
        range=1000
        power=10
        spread=0.1
        color=0xFFFFFFFF
        recoil=1

        burstyness=1
        roundsPerBurst=5

        explosive=ENABLED
        explodeRadius=50

        fragment={
            damage=50
            -- Fragments don't have `roundsPerSec`.
            muzzleVel=500
            range=500
            -- Fragments don't need `power`.
            spread=0.1
            color=0xFFFFFFFF
            -- Fragments have no need to exert `recoil`.

            -- Fragments also don't have `burstyness`.
            roundsPerBurst=5

            explosive=ENABLED
            explodeRadius=25
        }
    }
}
</code></pre>
<p>In fragments, <code>roundsPerBurst</code> is repurposed as the amount of fragments released when a bullet is destroyed.</p>
<p>In the code extract above, the base cannon bullet will split into 5 fragments, which are all identical. The fragments will also be created at a spread of 0.1 radians, or ~5.72°, as defined by the fragment's <code>spread</code> field.</p>
<video  controls>
  <source src="diagrams/fragment_first_example.mp4" type="video/mp4">
  Your browser does not support the video tag.
</video>
<h2 id="fragment-chaining"><a class="header" href="#fragment-chaining">Fragment Chaining</a></h2>
<p>As fragments can be nested within each other, we can create fragment chains. Below is an example of one using conventional one-line fragments for easy reading:</p>
<pre><code class="language-lua">{ 17000
    features=CANNON
    cannon={
        damage=100
        roundsPerSec=1
        muzzleVel=50
        range=50
        power=10
        -- Some fields have been left out for ease of explaining.

        fragment={ damage=100 muzzleVel=50 range=50 roundsPerBurst=1
        fragment={ damage=100 muzzleVel=50 range=50 roundsPerBurst=1
        fragment={ damage=100 muzzleVel=50 range=50 roundsPerBurst=1
        fragment={ damage=100 muzzleVel=50 range=50 roundsPerBurst=1
        }}}} -- Closing brackets are lined up at the end of the chain.
    }
}
</code></pre>
<p>In this code extract, there will be 5 fragment projectiles that spawn after one another in a chain.</p>
<h2 id="the-relationship-of-range-and-muzzlevel"><a class="header" href="#the-relationship-of-range-and-muzzlevel">The Relationship of <code>range</code> and <code>muzzleVel</code></a></h2>
<p>If you fire the cannon from the code extract above, you might notice something unexpected if you are unfamilier with fragment modding. Each new fragment is faster than the last by 50 units per second:</p>
<video  controls>
  <source src="diagrams/fragment_chain_speeding_up.mp4" type="video/mp4">
  Your browser does not support the video tag.
</video>
<p>This is caused by each successive fragment inheriting the sum of the velocities of all the bullets that came before it.
To have uniform velocities on the bullets, one might expect the solution to be to make the <code>muzzleVel</code> equal 0, but this does not work:
<video  controls>
<source src="diagrams/fragment_chain_going_on.mp4" type="video/mp4">
Your browser does not support the video tag.
</video></p>
<pre><code class="language-lua">    cannon={
        damage=100
        roundsPerSec=1
        muzzleVel=50
        range=50
        power=10

        fragment={ damage=100 muzzleVel=0 range=50 roundsPerBurst=1
        -- None of the other fragments are reached.
        fragment={ damage=100 muzzleVel=0 range=50 roundsPerBurst=1
        fragment={ damage=100 muzzleVel=0 range=50 roundsPerBurst=1
        fragment={ damage=100 muzzleVel=0 range=50 roundsPerBurst=1
        }}}}
    }
</code></pre>
<p>Although the second bullet has velocity, it is inherited from the first stage. Think back to how bullet duration is calculated based on only a bullet's <code>muzzleVel</code> and <code>range</code>, not its current velocity.</p>
<p>Now, understand that the second bullet will never transition to the third stage as the second bullet is "attempting" to travel a <code>range</code> of 50 at a <code>muzzleVel</code> of 0. The journey to travel 50 units at 0 units per second is uncompletable, the bullet will never enter the third stage.</p>
<p>To achieve uniform velocities, we must make the <code>muzzleVel</code> unnoticably small as well setting its <code>range</code> small enough that the fragments' duration is calculated to not be infinite.</p>
<p>If we want the fragments to last for one second, similar to the base bullet, then we can set <code>range</code> to 1 and the <code>muzzleVel</code> to 1. The bullet will travel 1 unit at 1 unit per second over a time of 1 second.</p>
<video  controls>
  <source src="diagrams/fragment_chain_uniform_velocity.mp4" type="video/mp4">
  Your browser does not support the video tag.
</video>
<pre><code class="language-lua">    cannon={
        damage=100
        roundsPerSec=1
        muzzleVel=50
        range=50
        power=10

        fragment={ damage=100 muzzleVel=1 range=1 roundsPerBurst=1
        fragment={ damage=100 muzzleVel=1 range=1 roundsPerBurst=1
        fragment={ damage=100 muzzleVel=1 range=1 roundsPerBurst=1
        fragment={ damage=100 muzzleVel=1 range=1 roundsPerBurst=1
		-- All fragments occur. success!
        }}}}
    }
</code></pre>
<p>Strangely, a bullet trying to travel a <code>range</code> of 0 at a <code>muzzleVel</code> of 0 completes its journey.</p>
<h2 id="patterns"><a class="header" href="#patterns">Patterns</a></h2>
<p>For more control over how bullets are spawned, you can select various pattern flags for the <code>pattern</code> field of a bullet. They can be used in both base bullets and fragments.</p>
<p>Below is an example of a cannon using the <code>RANDOM</code> pattern, which would be the same as having <code>pattern</code> not defined.</p>
<pre><code class="language-lua">    cannon={
        damage=100
        roundsPerSec=1
        muzzleVel=50
        range=50
        power=10
        recoil=0

        spread=pi*2
        pattern=RANDOM
    }
</code></pre>
<p>Below are all the bullet patterns, they can all be used on both base cannon bullets and fragments except for <code>WAVE</code>, which can only be used on base cannon bullets.</p>
<h3 id="random"><a class="header" href="#random">Random</a></h3>
<p><code>pattern=RANDOM</code>: default spread behaviour, choosing a random angle in the specified spread.</p>
<pre><code class="language-lua">	cannon={ spread=pi*2 pattern=RANDOM

        damage=100 roundsPerSec=5 muzzleVel=50 range=50 recoil=0 }
</code></pre>
<video height=256 controls>
  <source src="diagrams/fragment_pattern_random.mp4" type="video/mp4">
  Your browser does not support the video tag.
</video>
<h3 id="constant"><a class="header" href="#constant">Constant</a></h3>
<p><code>pattern=CONSTANT</code>: bullet will angle exactly at the spread angle. Positive <code>spread</code> angles bullet counterclockwise while negative <code>spread</code> angles bullets clockwise.</p>
<p>Firing counterclockwise:</p>
<pre><code class="language-lua">   cannon={ spread=pi*0.5 pattern=CONSTANT

       damage=100 roundsPerSec=5 muzzleVel=50 range=50 recoil=0 }
</code></pre>
<video height=256 controls>
  <source src="diagrams/fragment_pattern_constant_positive.mp4" type="video/mp4">
  Your browser does not support the video tag.
</video>
<p>Firing clockwise:</p>
<pre><code class="language-lua">   cannon={ spread=pi*-0.5 pattern=CONSTANT

       damage=100 roundsPerSec=5 muzzleVel=50 range=50 recoil=0 }
</code></pre>
<video height=256 controls>
  <source src="diagrams/fragment_pattern_constant_negative.mp4" type="video/mp4">
  Your browser does not support the video tag.
</video>
<h3 id="spiral"><a class="header" href="#spiral">Spiral</a></h3>
<p><code>pattern=SPIRAL</code>: bullets are evenly distributed within the spread angle. Needs <code>roundsPerBurst</code> and <code>burstyness</code> defined on base cannon bullets but only needs <code>roundsPerBurst</code> defined on fragments.</p>
<pre><code class="language-lua">   cannon={ spread=pi*0.5 pattern=SPIRAL roundsPerBurst=5 burstyness=0.5

       damage=100 roundsPerSec=5 muzzleVel=50 range=50 recoil=0 }
</code></pre>
<video height=256 controls>
  <source src="diagrams/fragment_pattern_spiral.mp4" type="video/mp4">
  Your browser does not support the video tag.
</video>
<h3 id="wave"><a class="header" href="#wave">Wave</a></h3>
<p><code>pattern=WAVE</code>: bullets are distributed according to a sine wave within the spread angle. Do not use on fragments.</p>
<pre><code class="language-lua">   cannon={ spread=pi*0.5 pattern=WAVE roundsPerBurst=20 burstyness=0.5

       damage=100 roundsPerSec=5 muzzleVel=50 range=50 recoil=0 }
</code></pre>
<video height=256 controls>
  <source src="diagrams/fragment_pattern_wave.mp4" type="video/mp4">
  Your browser does not support the video tag.
</video>
<h3 id="absolute"><a class="header" href="#absolute">Absolute</a></h3>
<p><code>pattern=ABSOLUTE</code>: bullets do not inherit velocity of ship or previous bullets. It can be mixed with any of the other pattern flags.</p>
<p>This is without <code>ABSOLUTE</code>:</p>
<pre><code class="language-lua">   cannon={ spread=0

       damage=100 roundsPerSec=5 muzzleVel=50 range=50 recoil=0 }
</code></pre>
<video height=256 controls>
  <source src="diagrams/fragment_pattern_absolute_no.mp4" type="video/mp4">
  Your browser does not support the video tag.
</video>
<p>This is with <code>ABSOLUTE</code>:</p>
<pre><code class="language-lua">   cannon={ spread=0 pattern=ABSOLUTE

       damage=100 roundsPerSec=5 muzzleVel=50 range=50 recoil=0 }
</code></pre>
<video height=256 controls>
  <source src="diagrams/fragment_pattern_absolute_with.mp4" type="video/mp4">
  Your browser does not support the video tag.
</video>
<h2 id="explosive-flags-for-fragments"><a class="header" href="#explosive-flags-for-fragments">Explosive Flags for Fragments</a></h2>
<p>There are fragment specific alternatives for <code>ENABLED</code>, <code>FINAL</code>, and <code>PROXIMITY</code> for the <code>explosive field</code>. Respectively, they are:</p>
<ul>
<li><code>FRAG_IMPACT</code>: bullet fragments when hitting a target but not when the bullet reaches the end of its range.</li>
<li><code>FRAG_FINAL</code>: bullet fragments at either the end of its range or when the bullet's damage output is exhausted.</li>
<li><code>FRAG_PROXIMITY</code>: bullet fragments when within proximity of an attackable block.</li>
</ul>
<p>There is also <code>FRAG_NOFLASH</code>, which makes bullets with this flag spawn without producing a frag spawn particle.</p>
<p>(<a href="./cannons.html#explosive-cannons">Explosive flags for non-fragments</a>)</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="cannons.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next prefetch" href="bullet_poofs.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="cannons.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next prefetch" href="bullet_poofs.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>

        <script src="ace.js"></script>
        <script src="editor.js"></script>
        <script src="mode-rust.js"></script>
        <script src="theme-dawn.js"></script>
        <script src="theme-tomorrow_night.js"></script>

        <script src="elasticlunr.min.js"></script>
        <script src="mark.min.js"></script>
        <script src="searcher.js"></script>

        <script src="clipboard.min.js"></script>
        <script src="highlight.js"></script>
        <script src="book.js"></script>

        <!-- Custom JS scripts -->


    </div>
    </body>
</html>
